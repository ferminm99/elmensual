import{D as H}from"./datepicker-B7zUZ_Hm.js";import{_ as j,h as g}from"./app-BHOrBh52.js";import{B as D,a5 as B,m as t,E as a,a6 as b,G as c,a0 as d,D as O,H as E,a7 as G,F as R,a8 as q,I as h}from"./vue-Dp34GT9d.js";import"./vuetify-HETxidax.js";const z={components:{Datepicker:H},data(){return{ultimaFacturacion:null,ventaUltimaFacturada:null,dialogCambioBombacha:!1,cambioBombacha:{articulo_id:null,talle:null,color:null},search:"",tipoBusqueda:"General",dialogoFechas:!1,filtroAplicado:!1,dialogFacturacion:!1,fechaDesdeFacturar:g().startOf("month").toDate(),fechaHastaFacturar:g().toDate(),fechaHasta:g().toDate(),fechaDesde:g().startOf("month").toDate(),dialogFechas:!1,ventasFiltradas:[],overlay:!1,options:{sortBy:["fecha"],sortDesc:[!0]},selectedVenta:{forma_pago:null,fecha:null,precio:null,costo_original:null},dialogVenta:!1,articuloActual:null,articulos:[],tallesDisponibles:[],coloresDisponibles:[],ventas:[],editDialog:!1,confirmDeleteDialog:!1,productos:[],precioTotal:0,snackbar:!1,snackbarText:"",form:{articulo_id:null,talle:null,color:null,cliente_nombre:"",cliente_apellido:"",cliente_cuit:"",cliente_cbu:"",precio:0,costo_original:0,fecha:g().toDate(),forma_pago:"efectivo"},headers:[{title:"Fecha",key:"fecha",sortable:!0},{title:"Producto",key:"articulo_talle_color",sortable:!1},{title:"Cliente",key:"cliente",sortable:!1},{title:"Precio",key:"precio",sortable:!1},{title:"Costo Original",key:"costo_original",sortable:!1},{title:"Forma de Pago",key:"forma_pago",sortable:!1},{title:"Acciones",key:"actions",sortable:!1}]}},created(){this.fetchArticulos(),this.fetchVentas(),this.fetchUltimaFacturacion(),console.log("PRUEBA 2"),this.options.sortBy=["fecha"],this.options.sortDesc=[!0]},watch:{productos:{handler(i){this.calcularPrecioTotal()},deep:!0}},computed:{snackbarStyle(){return{left:"50%",top:"50%",transform:"translate(-50%, -50%)","max-width":"400px",width:"auto"}},totalVentas(){return this.ventas.reduce((e,s)=>e+parseFloat(s.precio||0),0).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})},totalVentasFiltradas(){return this.ventasFiltradas.reduce((e,s)=>e+parseFloat(s.precio||0),0).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})},gananciasNetasFiltradas(){return this.ventasFiltradas.reduce((e,s)=>{const r=parseFloat(s.precio)-parseFloat(s.costo_original);return e+r},0).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}},methods:{getItemClass(i){return i.id===this.ventaUltimaFacturada?"ultima-facturada":this.ventasFacturadas.includes(i.id)?"facturada-general":""},fetchUltimaFacturacion(){axios.get("/facturaciones/ultima").then(i=>{const e=i.data;if(e&&e.venta_id){const s=this.ventas.find(r=>r.id===e.venta_id);s?this.ultimaFacturacion={...s,fecha_facturacion:e.fecha_facturacion}:this.ultimaFacturacion=null}}).catch(i=>{console.error("Error fetching última facturación",i),this.ultimaFacturacion=null})},formatPrice(i){const e=parseFloat(i);return isNaN(e)?i:e.toFixed(2)},openCambioBombachaDialog(i){this.selectedVenta=i,this.cambioBombacha={articulo_id:null,talle:null,color:null},this.dialogCambioBombacha=!0},confirmarCambioBombacha(){if(!this.cambioBombacha.articulo_id||this.cambioBombacha.talle===null||!this.cambioBombacha.color){this.snackbarText="Por favor selecciona la nueva bombacha.",this.snackbar=!0;return}this.selectedVenta.articulo.id,this.selectedVenta.talle,this.selectedVenta.color,axios.post("/ventas/cambiar-bombachas",{venta_id:this.selectedVenta.id,original:{articulo_id:this.selectedVenta.articulo.id,talle:this.selectedVenta.talle,color:this.selectedVenta.color},nueva:this.cambioBombacha,precio:this.selectedVenta.precio,costo_original:this.selectedVenta.costo_original,fecha:this.selectedVenta.fecha,forma_pago:this.selectedVenta.forma_pago}).then(()=>{this.fetchVentas(),this.fetchArticulos(),this.articuloActual=null,this.tallesDisponibles=[],this.coloresDisponibles=[],this.dialogCambioBombacha=!1,this.snackbarText="Cambio de bombacha realizado con éxito.",this.snackbar=!0}).catch(i=>{console.error(i),this.snackbarText="Error al cambiar la bombacha.",this.snackbar=!0})},cancelarFiltro(){this.ventasFiltradas=this.ventas,this.filtroAplicado=!1,this.fechaDesde=g().startOf("month").toDate(),this.fechaHasta=g().toDate()},aplicarFiltro(){if(!this.fechaDesde||!this.fechaHasta){alert("Por favor selecciona ambas fechas.");return}const i=g(this.fechaDesde).startOf("day"),e=g(this.fechaHasta).endOf("day");this.ventasFiltradas=this.ventas.filter(s=>g(s.fecha).isBetween(i,e,null,"[]")),this.filtroAplicado=!0,this.dialogoFechas=!1},openFechaDialog(){this.dialogoFechas=!0},openFacturarDialog(){this.dialogFacturacion=!0},descargarArchivo(i,e){const s=new Blob([i],{type:"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},generarFacturacion(){if(!this.fechaDesdeFacturar){this.snackbarText="Por favor selecciona una fecha desde.",this.snackbar=!0;return}const e=this.filtrarVentasPorFecha().filter(n=>n.forma_pago!=="efectivo");if(e.length===0){alert("No se encontraron ventas con transferencia en el rango seleccionado.");return}let s=`Facturación de ventas agrupadas (solo transferencia):

`,r={};e.forEach(n=>{const f=n.cliente,p=f.cuit||f.cbu||"",m=`${f.nombre} ${f.apellido} ${p}`;r[m]?(r[m].total+=parseFloat(n.precio),r[m].articulos.push({nombre:n.articulo.nombre,precio:n.precio})):r[m]={cliente:f,total:parseFloat(n.precio),articulos:[{nombre:n.articulo.nombre,precio:n.precio}]}});for(const[n,f]of Object.entries(r)){const{cliente:p,total:m,articulos:u}=f,_=p.cuit?`CUIT: ${p.cuit}`:p.cbu?`CBU: ${p.cbu}`:"Sin CUIT/CBU";s+=`Cliente: ${p.nombre} ${p.apellido}
`,s+=`${_}
`,s+=`Artículos comprados:
`,u.forEach(V=>{s+=`- ${V.nombre}: $${V.precio}
`}),s+=`Total: $${m.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}

`}const l=`facturacion_desde_${this.fechaDesdeFacturar}_hasta_hoy.txt`;this.descargarArchivo(s,l),axios.post("/facturaciones/guardar",{ventas:e,fecha:new Date}).then(n=>{this.ventaUltimaFacturada=n.data.ultima_venta_id,this.snackbarText="Facturación generada y guardada con éxito.",this.snackbar=!0}).catch(n=>{console.error("Error al guardar las facturaciones",n),this.snackbarText="Error al guardar la facturación.",this.snackbar=!0}),this.dialogFacturacion=!1},filtrarVentasPorFecha(){const i=g(this.fechaDesdeFacturar).format("YYYY-MM-DD"),e=g(this.fechaHastaFacturar).format("YYYY-MM-DD");return this.ventas.filter(s=>{const r=g(s.fecha).format("YYYY-MM-DD");return r>=i&&r<=e})},mostrarTextoFacturacion(i){alert(i)},buscarPorTodo(i,e,s){const r=e.toLowerCase().trim(),l=s.raw.cliente||{},n=`${l.nombre||""} ${l.apellido||""}`.toLowerCase(),f=(l.cbu||"").toLowerCase(),p=(l.cuit||"").toLowerCase(),u=((s.raw.articulo||{}).nombre||"").toLowerCase(),_=(s.raw.talle||"").toString(),V=(s.raw.color||"").toLowerCase(),y=(s.raw.precio||"").toString(),v=(s.raw.costo_original||"").toString(),T=n.includes(r),L=f.includes(r),I=p.includes(r),M=u.includes(r),F=_.includes(r),A=V.includes(r),C=y.includes(r),S=v.includes(r);return T||L||I||M||F||A||C||S},buscarPorProducto(i,e,s){const r=e.toLowerCase().trim().split(" "),l=s.raw.articulo||{},n=(l.nombre||"").toLowerCase(),f=(l.numero||"").toString(),p=(s.raw.talle||"").toString(),m=(s.raw.color||"").toLowerCase(),u=`${n} ${f} talle ${p} ${m}`.toLowerCase();return r.every(V=>u.includes(V))},buscarPorOtrosDatos(i,e,s){const r=e.toLowerCase().trim(),l=s.raw.cliente||{},n=`${l.nombre||""} ${l.apellido||""}`.toLowerCase(),f=(l.cbu||"").toLowerCase(),p=(l.cuit||"").toLowerCase(),m=(s.raw.precio||"").toString(),u=(s.raw.costo_original||"").toString(),_=n.includes(r),V=f.includes(r),y=p.includes(r),v=m.includes(r),T=u.includes(r);return _||V||y||v||T},formatFecha(i){const[e,s,r]=i.split("-");return`${r}-${s}-${e}`},formatFechaMoment(i){return g(i).format("DD-MM-YYYY")},openEditDialog(i){this.selectedVenta={...i},this.selectedVenta.cliente_nombre=i.cliente.nombre,this.selectedVenta.cliente_apellido=i.cliente.apellido,this.editDialog=!0},updateVenta(){axios.put(`/ventas/${this.selectedVenta.id}`,{precio:this.selectedVenta.precio,costo_original:this.selectedVenta.costo_original,fecha:g(this.selectedVenta.fecha).format("YYYY-MM-DD"),forma_pago:this.selectedVenta.forma_pago}).then(i=>{this.fetchVentas(),this.editDialog=!1}).catch(i=>{console.error(i)})},openDeleteConfirm(i){this.selectedVenta={...i},this.confirmDeleteDialog=!0},deleteVenta(){axios.delete(`/ventas/${this.selectedVenta.id}`).then(i=>{this.fetchVentas(),this.fetchArticulos(),this.confirmDeleteDialog=!1}).catch(i=>{console.error(i)})},openVentaDialog(){this.dialogVenta=!0},resetStockLocal(){this.productos.forEach(i=>{const e=this.tallesDisponibles.find(s=>s.talle===i.talle);if(e&&e[i.color]!==void 0){e[i.color]+=1;const s=this.coloresDisponibles.findIndex(r=>r.value===i.color);s!==-1&&(this.coloresDisponibles[s].props.disabled=!1)}}),this.productos=[]},closeDialogVenta(){this.resetStockLocal(),this.form={cliente_nombre:"",cliente_apellido:"",cliente_cuit:"",cliente_cbu:"",fecha:g().format("YYYY-MM-DD"),forma_pago:"efectivo"},this.articuloActual=null,this.tallesDisponibles=[],this.coloresDisponibles=[],this.productos=[],this.dialogVenta=!1},fetchArticulos(){axios.get("/articulo/listar/talles").then(i=>{this.articulos=i.data})},fetchVentas(){axios.get("/ventas/listar").then(i=>{this.ventas=i.data.sort((e,s)=>new Date(s.fecha)-new Date(e.fecha)),this.ventasFiltradas=this.ventas})},onTalleChange(i){let e=null;if(this.form.articulo_id?e=this.articulos.find(s=>s.id===this.form.articulo_id):this.cambioBombacha.articulo_id&&(e=this.articulos.find(s=>s.id===this.cambioBombacha.articulo_id)),e){const s=this.tallesDisponibles.find(r=>r.talle===i);s&&(this.form.color=null,this.coloresDisponibles=Object.keys(s).filter(r=>!["id","articulo_id","talle"].includes(r)).map(r=>{const l=s[r];return{title:r,value:r,props:{disabled:parseInt(l)===0}}}),this.coloresDisponibles=JSON.parse(JSON.stringify(this.coloresDisponibles)))}},loadTallesYColores(){this.form.color=null,this.form.talle=null;let i=null;this.form.articulo_id?i=this.articulos.find(e=>e.id===this.form.articulo_id):this.cambioBombacha.articulo_id&&(i=this.articulos.find(e=>e.id===this.cambioBombacha.articulo_id)),i?(this.articuloActual=i,this.tallesDisponibles=this.articuloActual.talles):this.tallesDisponibles=[]},getArticuloPrecio(){const i=this.articulos.find(e=>parseInt(e.id)===parseInt(this.form.articulo_id));return this.form.precio=i?i.precio:0,this.form.precio},calcularTotalGastado(){return this.ventas.reduce((e,s)=>{const r=parseFloat(s.precio)-parseFloat(s.costo_original);return e+r},0).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})},agregarProducto(){const i=this.articulos.find(e=>e.id===this.form.articulo_id);if(i&&this.form.talle!==null&&this.form.color){this.productos.push({articulo:i,talle:this.form.talle,color:this.form.color,precio:parseInt(i.precio),costo_original:parseInt(i.costo_original)});const e=this.tallesDisponibles.find(s=>s.talle===this.form.talle);if(e&&e[this.form.color]>0&&(e[this.form.color]-=1,e[this.form.color]===0)){const s=this.coloresDisponibles.findIndex(r=>r.value===this.form.color);s!==-1&&(this.coloresDisponibles=this.coloresDisponibles.map((r,l)=>l===s?{...r,props:{...r.props,disabled:!0}}:r))}this.form.articulo_id=null,this.form.talle=null,this.form.color=null}},eliminarProducto(i){const e=this.productos[i],s=this.tallesDisponibles.find(r=>r.talle===e.talle);if(s&&(s[e.color]+=1,s[e.color]>0)){const r=this.coloresDisponibles.findIndex(l=>l.value===e.color);r!==-1&&(this.coloresDisponibles=this.coloresDisponibles.map((l,n)=>n===r?{...l,props:{...l.props,disabled:!1}}:l))}this.productos.splice(i,1)},registrarVenta(){if(this.form.fecha=g(this.form.fecha).format("YYYY-MM-DD"),this.form.cliente_nombre=this.capitalizarPalabras(this.form.cliente_nombre),this.form.cliente_apellido=this.capitalizarPalabras(this.form.cliente_apellido),!this.productos.length){this.snackbarText="Por favor ingresa los productos",this.snackbar=!0;return}if(!this.form.cliente_nombre||!this.form.cliente_apellido){this.snackbarText="Por favor ingresa el nombre y apellido del cliente.",this.snackbar=!0;return}const i={cliente_nombre:this.form.cliente_nombre,cliente_apellido:this.form.cliente_apellido,cliente_cuit:this.form.cliente_cuit,cliente_cbu:this.form.cliente_cbu,forma_pago:this.form.forma_pago,productos:this.productos,fecha:this.form.fecha};axios.post("/ventas",i).then(e=>{this.fetchVentas(),this.fetchArticulos(),this.dialogVenta=!1,this.form={cliente_nombre:"",cliente_apellido:"",cliente_cuit:"",cliente_cbu:"",fecha:g().format("YYYY-MM-DD"),forma_pago:"efectivo"},this.productos=[],this.articuloActual=null,this.tallesDisponibles=[],this.coloresDisponibles=[]}).catch(e=>{console.error(e)})},calcularPrecioTotal(){this.precioTotal=this.productos.reduce((i,e)=>i+parseFloat(e.articulo.precio),0)},capitalizarPalabras(i){return i.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}}},J={class:"ml-4"},W={key:0},K={key:1,class:"gray--text"},Q={class:"black--text"},X={class:"green--text"},Z={class:"fecha-text"},$={class:"producto-text"},ee={class:"cliente-text"},te={key:0},le={key:1},oe={class:"precio-text"},ae={class:"costo-text"};function ie(i,e,s,r,l,n){const f=h("v-col"),p=h("v-row"),m=h("v-icon"),u=h("v-btn"),_=h("v-select"),V=h("v-text-field"),y=h("v-data-table"),v=h("v-card-title"),T=h("v-list-item-content"),L=h("v-list-item-action"),I=h("v-list-item"),M=h("v-list"),F=h("v-radio"),A=h("v-radio-group"),C=h("Datepicker"),S=h("v-form"),k=h("v-card-text"),P=h("v-spacer"),x=h("v-card-actions"),w=h("v-card"),U=h("v-dialog"),N=h("v-snackbar");return D(),B("div",null,[t(p,null,{default:a(()=>[t(f,null,{default:a(()=>e[41]||(e[41]=[b("h1",{class:"title font-weight-bold"},"Gestión de Ventas",-1)])),_:1})]),_:1}),t(p,{justify:"start",class:"d-flex align-center mb-2"},{default:a(()=>[t(u,{color:"black",class:"ml-3 mr-4",onClick:n.openVentaDialog},{default:a(()=>[t(m,{left:"",color:"white"},{default:a(()=>e[42]||(e[42]=[c("mdi-cash")])),_:1}),e[43]||(e[43]=c(" Registrar Venta "))]),_:1},8,["onClick"]),t(u,{color:"white",outlined:"",class:"mr-4",onClick:n.openFacturarDialog},{default:a(()=>[t(m,{left:""},{default:a(()=>e[44]||(e[44]=[c("mdi-file-document")])),_:1}),e[45]||(e[45]=c(" Facturar "))]),_:1},8,["onClick"]),t(u,{color:"white",outlined:"",class:"mr-4",onClick:n.openFechaDialog},{default:a(()=>[t(m,{left:""},{default:a(()=>e[46]||(e[46]=[c("mdi-calendar")])),_:1}),e[47]||(e[47]=c(" Filtrar por Fecha "))]),_:1},8,["onClick"]),b("div",J,[e[48]||(e[48]=c(" Última Facturación: ")),l.ultimaFacturacion?(D(),B("strong",W,d(n.formatFechaMoment(l.ultimaFacturacion.fecha)+" de "+l.ultimaFacturacion.cliente.nombre),1)):(D(),B("span",K,"Sin facturación registrada"))])]),_:1}),t(p,null,{default:a(()=>[t(f,{cols:"12"},{default:a(()=>[t(p,{"no-gutters":""},{default:a(()=>[t(f,{cols:"12",md:"3"},{default:a(()=>[t(_,{class:"mr-2",modelValue:l.tipoBusqueda,"onUpdate:modelValue":e[0]||(e[0]=o=>l.tipoBusqueda=o),items:["General","Producto","Otros datos"],label:"Buscar por",dense:"",variant:"solo"},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",md:"9"},{default:a(()=>[t(V,{modelValue:l.search,"onUpdate:modelValue":e[1]||(e[1]=o=>l.search=o),label:"Buscar","append-inner-icon":"mdi-magnify",dense:"",variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(p,{class:"mt-0"},{default:a(()=>[t(f,{cols:"12",class:"total-text"},{default:a(()=>[b("h4",null,[e[49]||(e[49]=c(" Total de Ventas: ")),b("span",Q,"$"+d(n.totalVentas),1)]),b("h4",null,[e[50]||(e[50]=c(" Ganancias Netas: ")),b("span",X,"$"+d(n.calcularTotalGastado()),1)])]),_:1})]),_:1}),l.filtroAplicado?(D(),O(p,{key:0},{default:a(()=>[t(f,{cols:"12",class:"d-flex align-center"},{default:a(()=>[b("span",null," Total de Ventas desde "+d(n.formatFechaMoment(l.fechaDesde))+" hasta "+d(n.formatFechaMoment(l.fechaHasta))+": $"+d(n.totalVentasFiltradas),1),t(u,{icon:"",onClick:n.cancelarFiltro,class:"cancelar-filtro-btn"},{default:a(()=>[t(m,{color:"red"},{default:a(()=>e[51]||(e[51]=[c("mdi-close-circle")])),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})):E("",!0),t(y,{headers:l.headers,items:l.ventasFiltradas,search:l.search,"custom-filter":l.tipoBusqueda==="Producto"?n.buscarPorProducto:l.tipoBusqueda==="Otros datos"?n.buscarPorOtrosDatos:n.buscarPorTodo,options:l.options,"item-class":n.getItemClass,class:"elevation-1 mt-4"},{"item.fecha":a(({item:o})=>[b("span",Z,d(n.formatFecha(o.fecha)),1)]),"item.articulo_talle_color":a(({item:o})=>[b("span",$,d(o.articulo.nombre)+" - Talle "+d(o.talle)+" "+d(o.color),1)]),"item.cliente":a(({item:o})=>[b("div",null,d(o.cliente.nombre)+" "+d(o.cliente.apellido),1),b("div",ee,[o.cliente.cuit?(D(),B("span",te,"CUIT: "+d(o.cliente.cuit),1)):o.cliente.cbu?(D(),B("span",le,"CBU: "+d(o.cliente.cbu),1)):E("",!0)])]),"item.precio":a(({item:o})=>[b("span",oe,"$"+d(n.formatPrice(o.precio)),1)]),"item.costo_original":a(({item:o})=>[b("span",ae,"$"+d(n.formatPrice(o.costo_original)),1)]),"item.forma_pago":a(({item:o})=>[b("span",{class:G(o.forma_pago==="efectivo"?"efectivo-text":"transferencia-text")},d(o.forma_pago==="efectivo"?"💵 Efectivo":"💳 Transferencia"),3)]),"item.actions":a(({item:o})=>[t(u,{flat:"",icon:"",onClick:Y=>n.openEditDialog(o)},{default:a(()=>[t(m,{color:"black"},{default:a(()=>e[52]||(e[52]=[c("mdi-pencil-outline")])),_:1})]),_:2},1032,["onClick"]),t(u,{flat:"",icon:"",onClick:Y=>n.openDeleteConfirm(o)},{default:a(()=>[t(m,{color:"black"},{default:a(()=>e[53]||(e[53]=[c("mdi-trash-can-outline")])),_:1})]),_:2},1032,["onClick"]),t(u,{flat:"",icon:"",onClick:Y=>n.openCambioBombachaDialog(o)},{default:a(()=>[t(m,{color:"black"},{default:a(()=>e[54]||(e[54]=[c("mdi-swap-horizontal")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["headers","items","search","custom-filter","options","item-class"]),t(U,{modelValue:l.dialogVenta,"onUpdate:modelValue":e[12]||(e[12]=o=>l.dialogVenta=o),"max-width":"600px"},{default:a(()=>[t(w,null,{default:a(()=>[t(v,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[56]||(e[56]=b("span",{class:"headline"},"Registrar Venta",-1)),t(u,{flat:"",icon:"",onClick:n.closeDialogVenta},{default:a(()=>[t(m,{color:"red"},{default:a(()=>e[55]||(e[55]=[c("mdi-close")])),_:1})]),_:1},8,["onClick"])]),_:1}),t(k,null,{default:a(()=>[t(S,{ref:"form"},{default:a(()=>[t(_,{modelValue:l.form.articulo_id,"onUpdate:modelValue":[e[2]||(e[2]=o=>l.form.articulo_id=o),n.loadTallesYColores],items:l.articulos,"item-title":o=>`${o.numero} - ${o.nombre}`,"item-value":"id",label:"Selecciona un artículo"},null,8,["modelValue","items","item-title","onUpdate:modelValue"]),t(p,null,{default:a(()=>[t(f,{cols:"6"},{default:a(()=>[t(_,{modelValue:l.form.talle,"onUpdate:modelValue":[e[3]||(e[3]=o=>l.form.talle=o),n.onTalleChange],items:l.tallesDisponibles,"item-title":"talle",label:"Selecciona un talle",disabled:!l.form.articulo_id},null,8,["modelValue","items","disabled","onUpdate:modelValue"])]),_:1}),t(f,{cols:"6"},{default:a(()=>[t(_,{modelValue:l.form.color,"onUpdate:modelValue":e[4]||(e[4]=o=>l.form.color=o),items:l.coloresDisponibles,"item-title":"title","item-value":"value","item-props":o=>o.props,label:"Selecciona un color",clearable:""},null,8,["modelValue","items","item-props"])]),_:1})]),_:1}),t(u,{color:"green",onClick:n.agregarProducto},{default:a(()=>e[57]||(e[57]=[c(" Agregar Producto ")])),_:1},8,["onClick"]),t(M,{dense:""},{default:a(()=>[(D(!0),B(R,null,q(l.productos,(o,Y)=>(D(),O(I,{key:Y,class:"d-flex align-center"},{default:a(()=>[t(T,null,{default:a(()=>[c(d(o.articulo.nombre)+" - Talle "+d(o.talle)+" - Color "+d(o.color),1)]),_:2},1024),t(L,null,{default:a(()=>[t(u,{icon:"",onClick:se=>n.eliminarProducto(Y)},{default:a(()=>[t(m,{color:"red"},{default:a(()=>e[58]||(e[58]=[c("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(V,{label:"Precio Total",modelValue:l.precioTotal,"onUpdate:modelValue":e[5]||(e[5]=o=>l.precioTotal=o),readonly:""},null,8,["modelValue"]),t(V,{modelValue:l.form.cliente_nombre,"onUpdate:modelValue":e[6]||(e[6]=o=>l.form.cliente_nombre=o),label:"Nombre del cliente",required:""},null,8,["modelValue"]),t(V,{modelValue:l.form.cliente_apellido,"onUpdate:modelValue":e[7]||(e[7]=o=>l.form.cliente_apellido=o),label:"Apellido",required:""},null,8,["modelValue"]),t(V,{modelValue:l.form.cliente_cuit,"onUpdate:modelValue":e[8]||(e[8]=o=>l.form.cliente_cuit=o),label:"CUIT (opcional)",type:"number"},null,8,["modelValue"]),t(V,{modelValue:l.form.cliente_cbu,"onUpdate:modelValue":e[9]||(e[9]=o=>l.form.cliente_cbu=o),label:"CBU (opcional)"},null,8,["modelValue"]),t(A,{modelValue:l.form.forma_pago,"onUpdate:modelValue":e[10]||(e[10]=o=>l.form.forma_pago=o),label:"Forma de Pago",mandatory:!0},{default:a(()=>[t(F,{label:"Efectivo",value:"efectivo"}),t(F,{label:"Transferencia",value:"transferencia"})]),_:1},8,["modelValue"]),t(C,{modelValue:l.form.fecha,"onUpdate:modelValue":e[11]||(e[11]=o=>l.form.fecha=o),placeholder:"Seleccione una fecha"},null,8,["modelValue"])]),_:1},512)]),_:1}),t(x,null,{default:a(()=>[t(P),t(u,{text:"",onClick:n.closeDialogVenta},{default:a(()=>e[59]||(e[59]=[c("Cancelar")])),_:1},8,["onClick"]),t(u,{color:"green",text:"",onClick:n.registrarVenta},{default:a(()=>e[60]||(e[60]=[c("Guardar")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:l.editDialog,"onUpdate:modelValue":e[19]||(e[19]=o=>l.editDialog=o),"max-width":"600px",scrollable:""},{default:a(()=>[t(w,null,{default:a(()=>[t(v,{class:"multi-line-title d-flex justify-space-between"},{default:a(()=>[b("div",null,[e[61]||(e[61]=c(" Editar Venta de ")),b("strong",null,d(l.selectedVenta.cliente_nombre)+" ",1),b("strong",null,d(l.selectedVenta.cliente_apellido),1),e[62]||(e[62]=c(" de ")),b("div",null,d(l.selectedVenta.articulo.nombre)+" - Talle "+d(l.selectedVenta.talle)+" - Color "+d(l.selectedVenta.color),1)]),t(u,{flat:"",icon:"",onClick:e[13]||(e[13]=o=>l.editDialog=!1),class:"close-btn"},{default:a(()=>[t(m,{color:"red"},{default:a(()=>e[63]||(e[63]=[c("mdi-close")])),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(V,{modelValue:l.selectedVenta.precio,"onUpdate:modelValue":e[14]||(e[14]=o=>l.selectedVenta.precio=o),label:"Precio",type:"number"},null,8,["modelValue"]),t(V,{modelValue:l.selectedVenta.costo_original,"onUpdate:modelValue":e[15]||(e[15]=o=>l.selectedVenta.costo_original=o),label:"Precio por mayor",type:"number"},null,8,["modelValue"]),t(A,{modelValue:l.selectedVenta.forma_pago,"onUpdate:modelValue":e[16]||(e[16]=o=>l.selectedVenta.forma_pago=o),label:"Forma de Pago",mandatory:!0},{default:a(()=>[t(F,{label:"Efectivo",value:"efectivo"}),t(F,{label:"Transferencia",value:"transferencia"})]),_:1},8,["modelValue"]),t(C,{modelValue:l.selectedVenta.fecha,"onUpdate:modelValue":e[17]||(e[17]=o=>l.selectedVenta.fecha=o),placeholder:"Seleccione una fecha"},null,8,["modelValue"])]),_:1}),t(x,null,{default:a(()=>[t(P),t(u,{text:"",onClick:e[18]||(e[18]=o=>l.editDialog=!1)},{default:a(()=>e[64]||(e[64]=[c("Cancelar")])),_:1}),t(u,{color:"green",text:"",onClick:n.updateVenta},{default:a(()=>e[65]||(e[65]=[c("Guardar")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:l.confirmDeleteDialog,"onUpdate:modelValue":e[22]||(e[22]=o=>l.confirmDeleteDialog=o),"max-width":"400px"},{default:a(()=>[t(w,null,{default:a(()=>[t(v,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[67]||(e[67]=c("Confirmar eliminación")),t(u,{flat:"",icon:"",onClick:e[20]||(e[20]=o=>l.confirmDeleteDialog=!1)},{default:a(()=>[t(m,{color:"red"},{default:a(()=>e[66]||(e[66]=[c("mdi-close")])),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[c(" ¿Estás seguro de que deseas eliminar la venta de "+d(l.selectedVenta.articulo.nombre)+" para el cliente ",1),b("strong",null,d(l.selectedVenta.cliente.nombre)+" "+d(l.selectedVenta.cliente.apellido),1),e[68]||(e[68]=c("? "))]),_:1}),t(x,null,{default:a(()=>[t(u,{text:"",onClick:e[21]||(e[21]=o=>l.confirmDeleteDialog=!1)},{default:a(()=>e[69]||(e[69]=[c("Cancelar")])),_:1}),t(u,{color:"red",text:"",onClick:n.deleteVenta},{default:a(()=>e[70]||(e[70]=[c("Eliminar")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:l.dialogFacturacion,"onUpdate:modelValue":e[27]||(e[27]=o=>l.dialogFacturacion=o),"max-width":"500px"},{default:a(()=>[t(w,null,{default:a(()=>[t(v,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[72]||(e[72]=c("Generar Facturación")),t(u,{flat:"",icon:"",onClick:e[23]||(e[23]=o=>l.dialogFacturacion=!1)},{default:a(()=>[t(m,{color:"red"},{default:a(()=>e[71]||(e[71]=[c("mdi-close")])),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(C,{modelValue:l.fechaDesdeFacturar,"onUpdate:modelValue":e[24]||(e[24]=o=>l.fechaDesdeFacturar=o),label:"Fecha Desde"},null,8,["modelValue"]),t(C,{modelValue:l.fechaHastaFacturar,"onUpdate:modelValue":e[25]||(e[25]=o=>l.fechaHastaFacturar=o),label:"Fecha Hasta"},null,8,["modelValue"])]),_:1}),t(x,null,{default:a(()=>[t(P),t(u,{text:"",onClick:e[26]||(e[26]=o=>l.dialogFacturacion=!1)},{default:a(()=>e[73]||(e[73]=[c("Cancelar")])),_:1}),t(u,{color:"green",text:"",onClick:n.generarFacturacion},{default:a(()=>e[74]||(e[74]=[c("Generar")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:l.dialogoFechas,"onUpdate:modelValue":e[32]||(e[32]=o=>l.dialogoFechas=o),"max-width":"600px"},{default:a(()=>[t(w,null,{default:a(()=>[t(v,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[76]||(e[76]=c("Seleccionar Fecha Desde y Hasta")),t(u,{flat:"",icon:"",onClick:e[28]||(e[28]=o=>l.dialogoFechas=!1)},{default:a(()=>[t(m,{color:"red"},{default:a(()=>e[75]||(e[75]=[c("mdi-close")])),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(C,{modelValue:l.fechaDesde,"onUpdate:modelValue":e[29]||(e[29]=o=>l.fechaDesde=o)},null,8,["modelValue"]),t(C,{modelValue:l.fechaHasta,"onUpdate:modelValue":e[30]||(e[30]=o=>l.fechaHasta=o)},null,8,["modelValue"])]),_:1}),t(x,null,{default:a(()=>[t(u,{text:"",onClick:e[31]||(e[31]=o=>l.dialogoFechas=!1)},{default:a(()=>e[77]||(e[77]=[c("Cancelar")])),_:1}),t(u,{color:"primary",text:"",onClick:n.aplicarFiltro},{default:a(()=>e[78]||(e[78]=[c("Aplicar")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:l.dialogCambioBombacha,"onUpdate:modelValue":e[38]||(e[38]=o=>l.dialogCambioBombacha=o),"max-width":"600px"},{default:a(()=>[t(w,null,{default:a(()=>[t(v,{class:"d-flex justify-space-between"},{default:a(()=>[e[80]||(e[80]=b("span",{class:"headline"},"Cambiar Bombacha",-1)),t(P),t(u,{icon:"",onClick:e[33]||(e[33]=o=>l.dialogCambioBombacha=!1)},{default:a(()=>[t(m,{color:"red"},{default:a(()=>e[79]||(e[79]=[c("mdi-close")])),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(S,{ref:"cambioBombacha"},{default:a(()=>[t(_,{modelValue:l.cambioBombacha.articulo_id,"onUpdate:modelValue":[e[34]||(e[34]=o=>l.cambioBombacha.articulo_id=o),n.loadTallesYColores],items:l.articulos,"item-title":o=>`${o.numero} - ${o.nombre}`,"item-value":"id",label:"Selecciona un artículo"},null,8,["modelValue","items","item-title","onUpdate:modelValue"]),t(p,null,{default:a(()=>[t(f,{cols:"6"},{default:a(()=>[t(_,{modelValue:l.cambioBombacha.talle,"onUpdate:modelValue":[e[35]||(e[35]=o=>l.cambioBombacha.talle=o),n.onTalleChange],items:l.tallesDisponibles,"item-title":"talle",label:"Selecciona un talle",disabled:!l.cambioBombacha.articulo_id},null,8,["modelValue","items","disabled","onUpdate:modelValue"])]),_:1}),t(f,{cols:"6"},{default:a(()=>[t(_,{modelValue:l.cambioBombacha.color,"onUpdate:modelValue":e[36]||(e[36]=o=>l.cambioBombacha.color=o),items:l.coloresDisponibles,"item-title":"title","item-value":"value",label:"Selecciona un color",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1},512)]),_:1}),t(x,null,{default:a(()=>[t(P),t(u,{text:"",onClick:e[37]||(e[37]=o=>l.dialogCambioBombacha=!1)},{default:a(()=>e[81]||(e[81]=[c("Cancelar")])),_:1}),t(u,{color:"green",text:"",onClick:n.confirmarCambioBombacha},{default:a(()=>e[82]||(e[82]=[c("Confirmar")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:l.snackbar,"onUpdate:modelValue":e[40]||(e[40]=o=>l.snackbar=o),timeout:3e3,color:i.snackbarColor,location:"center"},{default:a(()=>[c(d(l.snackbarText)+" ",1),t(u,{color:"red",text:"",onClick:e[39]||(e[39]=o=>l.snackbar=!1)},{default:a(()=>e[83]||(e[83]=[c("Cerrar")])),_:1})]),_:1},8,["modelValue","color"])])}const de=j(z,[["render",ie],["__scopeId","data-v-5cb30e58"]]);export{de as default};
